<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <title>F1 Qualification Results</title>

  <style>

    body { font-family: Arial, sans-serif; margin: 20px; }

    table { border-collapse: collapse; width: 100%; margin-top: 20px; }

    th, td { padding: 8px; border: 1px solid #ccc; text-align: left; }

    th { background-color: #f2f2f2; }

    select { margin-right: 10px; }

  </style>

</head>

<body>

  <h1>F1 Qualification Results</h1>



  <label for="season-select">Season:</label>

  <select id="season-select">

    <option value="2025" selected>2025</option>

    <option value="2024">2024</option>

    <option value="2023">2023</option>

    <option value="2022">2022</option>

    <option value="2021">2021</option>

    <option value="2020">2020</option>

    <option value="2019">2019</option>

    <option value="2018">2018</option>

  </select>



  <label for="race-select">Race:</label>

  <select id="race-select">

    <!-- Dynamically populate race options -->

  </select>



  <button id="load-btn">Load Results</button>



  <table id="results-table">

    <thead></thead>

    <tbody></tbody>

  </table>



  <script>

    const seasonSelect = document.getElementById('season-select');

    const raceSelect = document.getElementById('race-select');

    const loadButton = document.getElementById('load-btn');

    const tableHead = document.querySelector('#results-table thead');

    const tableBody = document.querySelector('#results-table tbody');



    // Populate race numbers 1â€“25 (adjust as needed)

    for (let i = 1; i <= 25; i++) {

      const opt = document.createElement('option');

      opt.value = i;

      opt.textContent = i;

      raceSelect.appendChild(opt);

    }

    raceSelect.value = "1"; // default



    function fetchData(season, race) {

      fetch(`/qualifying?season=${season}&race=${race}`)

        .then(res => res.json())

        .then(data => {

          tableHead.innerHTML = '';

          tableBody.innerHTML = '';



          // Headers

          const headerRow = document.createElement('tr');

          data.columns.forEach(col => {

            const th = document.createElement('th');

            th.textContent = col;

            headerRow.appendChild(th);

          });

          tableHead.appendChild(headerRow);



          // Rows

          data.rows.forEach(row => {

            const tr = document.createElement('tr');

            row.forEach(cell => {

              const td = document.createElement('td');

              td.textContent = cell;

              tr.appendChild(td);

            });

            tableBody.appendChild(tr);

          });

        })

        .catch(err => {

          console.error('Error loading data', err);

        });

    }



    // Load default data on page load

    fetchData(seasonSelect.value, raceSelect.value);



    loadButton.addEventListener('click', () => {

      fetchData(seasonSelect.value, raceSelect.value);

    });

  </script>

</body>

</html>

